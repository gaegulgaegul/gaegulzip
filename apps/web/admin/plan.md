# Admin Auth - TDD Plan

## 개요

어드민 대시보드에 비밀번호 기반 인증을 추가한다.
Next.js 자체 완결 (Express 서버 수정 없음).

## 아키텍처

```
비밀번호 입력 → POST /api/auth/login → SHA-256 해시 비교 → HttpOnly 쿠키 발급
                                                              ↓
대시보드 접근 → middleware.ts → 쿠키 확인 → 통과 or /login 리디렉트
                                                              ↓
쿠키 만료 → 자동으로 /login 리디렉트 (로그아웃 불필요)
```

- 비밀번호: SHA-256 해시를 코드 내 상수로 보관 (환경변수 불필요)
- `admin-session`: HttpOnly 쿠키로 세션 관리
- `middleware.ts`: /dashboard 등 보호 경로에서 인증 체크

## 테스트 (Playwright E2E)

### 0. 테스트 환경 설정
- [x] Playwright 설치 및 설정

### 1. 로그인 페이지 표시
- [x] `/login`에 접속하면 비밀번호 입력 폼이 보인다

### 2. 로그인 실패
- [x] 잘못된 비밀번호를 입력하면 에러 메시지가 표시된다

### 3. 로그인 성공
- [x] 올바른 비밀번호를 입력하면 `/dashboard`로 리디렉트된다

### 4. 미인증 접근 차단
- [x] 로그인하지 않고 `/dashboard`에 접근하면 `/login`으로 리디렉트된다

### 5. 인증된 대시보드 접근
- [x] 로그인 후 `/dashboard`에 접근하면 정상적으로 페이지가 표시된다

### 6. 이미 로그인된 상태에서 로그인 페이지
- [x] 이미 로그인된 상태에서 `/login`에 접근하면 `/dashboard`로 리디렉트된다

### 7. 공지사항 사이드바 메뉴
- [ ] 사이드바에 "공지사항" 메뉴가 표시된다
- [ ] 클릭하면 /notices로 이동한다

### 8. 공지사항 목록 페이지
- [ ] /notices에 접속하면 공지사항 관리 페이지가 표시된다
- [ ] "새 공지 작성" 버튼이 있다

### 9. 공지사항 작성
- [ ] 새 공지 작성 폼에서 제목/본문 입력 후 저장하면 목록에 나타난다

### 10. 공지사항 수정
- [ ] 목록에서 공지를 클릭하면 수정 페이지로 이동한다
- [ ] 수정 후 저장하면 변경사항이 반영된다

### 11. 공지사항 삭제
- [ ] 삭제 버튼 클릭 시 확인 다이얼로그가 표시된다
- [ ] 확인하면 목록에서 사라진다

### 12. 공지사항 고정
- [ ] 고정 토글 시 상태가 변경된다
